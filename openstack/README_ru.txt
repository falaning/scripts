+-----------------------------------------------------------+
|                                                           |
|           Openstack scripts by Boris Chernyy              |
|                                                           |
+-----------------------------------------------------------+


В данной директории мы имеем следующие скрипты:
----------------------------------------------

- ANY_HYPER_vm_test_mig_2.sh
- ANY_HYPER+no-live_vm_test_mig_2.sh
- check_hyper_vcpu.sh
- get_vm_info.sh
- no-live_vm_test_mig_2.sh
- show_hy_info.sh
- take_VM-ID_from_hypervisor.sh
- vm_manual_migration.sh
- vm_test_mig_2.sh


и следующие файлы:
-----------------

- hyper_list
- vm_list


Как пользоваться:
-----------------

+----------------------------------+
|ANY_HYPER_vm_test_mig_2.sh        |
+----------------------------------+
"Массовая live-migration ВМ из списка vm_list на любые свободные гипервизоры, которые выберет openstack"

Добавьте в файл "vm_list" openstack_id тех вм, которые хотите мигрировать в следующем порядке (каждый новый id с новой строки):

1234567-abcdefg-blablabla
1234567-abcdefg-blablabla
1234567-abcdefg-blablabla

После того как запустите скрипт, нажмите "enter" чтобы начать миграцию или "ctrl + c" чтобы отменить выполнение скрипта.

ВАЖНО!!! Для работы скрипта файл "vm_list" и сам скрипт "ANY_HYPER_vm_test_mig_2.sh" должны располагаться в одной директории.
ВАЖНО!!! Если скрипт выдаёт ошибку, возможно виноват флаг "--os-compute-api-version 2.56". Для этого измените api версию в данном флашге на нужную вам,
или просто уберите этот флаг.


+----------------------------------+
|ANY_HYPER+no-live_vm_test_mig_2.sh|
+----------------------------------+
"То же что и "ANY_HYPER_vm_test_mig_2.sh" , но только исключает live-migration"


+----------------------------------+
|check_hyper_vcpu.sh               |
+----------------------------------+
"Показать количество VCPU на каждом из гипервизоров в списке hyper_list"

Добавьте в файл "hyper_list" короткие именя гипервизоров, на которых вы хотите узнать количество VCPU в следующем порядке (каждое имя с новой строки):

example-name-01
example-name-02
example-name-03
example-name-04
example-name-05

ВАЖНО!!! Для работы скрипта файл "hyper_list" и сам скрипт "check_hyper_vcpu.sh" должны располагаться в одной директории.


+----------------------------------+
|get_vm_info.sh                    |
+----------------------------------+
"Показать информацию о ВМ в списке "vm_list" (host, power_state, m_state, status) и информацию о flavor каждой из ВМ (name, vcpus, ram, disk, swap)"

Добавьте в файл "vm_list" openstack_id тех вм, которые хотите мигрировать в следующем порядке (каждый новый id с новой строки):

1234567-abcdefg-blablabla
1234567-abcdefg-blablabla
1234567-abcdefg-blablabla

ВАЖНО!!! Для работы скрипта файл "vm_list" и сам скрипт "get_vm_info.sh" должны располагаться в одной директории.


+----------------------------------+
|no-live_vm_test_mig_2.sh          |
+----------------------------------+
"No-live миграция ВМ из списка "vm_list" на конкретный гипервизор"

Добавьте в файл "vm_list" openstack_id тех вм, которые хотите мигрировать в следующем порядке (каждый новый id с новой строки):

1234567-abcdefg-blablabla
1234567-abcdefg-blablabla
1234567-abcdefg-blablabla

Затем запустите скрипт. Скрипт попросит ввести короткое имя гипервизора, НА который будет производиться миграция (например example-name-0).
Миграция началась. Дождитесь окончания работы скрпита.

ВАЖНО!!! Для работы скрипта файл "vm_list" и сам скрипт "no-live_vm_test_mig_2.sh" должны располагаться в одной директории.
ВАЖНО!!! Если скрипт выдаёт ошибку, возможно виноват флаг "--os-compute-api-version 2.56". Для этого измените api версию в данном флашге на нужную вам,
или просто уберите этот флаг.


+----------------------------------+
|show_hy_info.sh                   |
+----------------------------------+
"Показать информацию о гипервизоре (vcpus, disk, ram)"

Запустите скрипт. После запуска скрипт попросит ввести короткое имя гипервизора (например example-name-01), после чего вы увидите о нём информацию (vcpus, disk, ram).


+----------------------------------+
|take_VM-ID_from_hypervisor.sh     |
+----------------------------------+
"Получить openstack_id ВМ с определённого гипервизора, или же со всех гипервизоров"

Запустите скрипт. Скрипт попросит ввести короткое имя гипервизора (например example-name-01), после чего в выводе скрипта вы полуите список openstack_id всех ВМ с этого
гипервизора.
ЕСЛИ не указать конкретный гипервизор, а просто нажать "enter" (или же, если данное имя гипервизора не будет найдено) - тогда вы получите список openstack_id всех ВМ со всех
гипервизоров.


+----------------------------------+
|vm_manual_migration.sh            |
+----------------------------------+
"Live-migration ВМ из списка "vm_list" на определённый, или же любой свободный гипервизор"

Добавьте в файл "vm_list" openstack_id тех вм, которые хотите мигрировать в следующем порядке (каждый новый id с новой строки):

1234567-abcdefg-blablabla
1234567-abcdefg-blablabla
1234567-abcdefg-blablabla

Затем запустите скрипт. Скрипт попросит ввести короткое имя гипервизора, НА который будет производиться миграция (например example-name-0).
Если имя не ввести - миграция будет произведена на любой свободный подходящий гипервизор, который выберет openstack.
Миграция началась. Дождитесь окончания работы скрпита.

ВАЖНО!!! Для работы скрипта файл "vm_list" и сам скрипт "no-live_vm_test_mig_2.sh" должны располагаться в одной директории.
ВАЖНО!!! Если скрипт выдаёт ошибку, возможно виноват флаг "--os-compute-api-version 2.56". Для этого измените api версию в данном флашге на нужную вам,
или просто уберите этот флаг.


+----------------------------------+
|vm_test_mig_2.sh                  |
+----------------------------------+
"Та же самая live-migration ВМ, что и "vm_manual_migration.sh" но с обширным выводом информации о ВМ, Гипервизоре (на который мигрируется ВМ)"

ВАЖНО!!! Для работы скрипта файл "vm_list" и сам скрипт "no-live_vm_test_mig_2.sh" должны располагаться в одной директории.
ВАЖНО!!! Если скрипт выдаёт ошибку, возможно виноват флаг "--os-compute-api-version 2.56". Для этого измените api версию в данном флашге на нужную вам,
или просто уберите этот флаг.

